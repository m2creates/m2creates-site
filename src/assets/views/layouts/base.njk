<!DOCTYPE html>
<html lang="{{ site.meta.locale }}">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% set metaTitle = seo.title or title %}
    <title>{% if metaTitle %}{{ metaTitle }} | {% endif %}{{ site.name }}</title>

    {% include "components/meta.njk" %}

    {% block schema %}
    {% include "components/schema.njk" %}
    {% endblock %}

    <link rel="stylesheet" href="./assets/tailwind.css" />

    {% block styles %}
    {% endblock %}

    {# Dark Mode Handler #}
    <script>(localStorage.getItem('darkMode') === 'true') && document.documentElement.classList.add('dark');</script>

    {% if site.analytics.provider === "fathom" %}
    {# Fathom Analytics #}
    <script src="{{ site.analytics.fathom_url }}" site="{{ site.analytics.fathom_id }}" honor-dnt="true" defer></script>
    {% endif %}

    {# Netlify Identity #}
    {% if page.url === "/" %}
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js" defer></script>
    {% endif %}

    {% block scripts_head %}
    {% endblock %}
    
  </head>
  <body class="flex flex-col min-h-screen px-8 mx-auto max-w-prose dark:bg-slate-900 dark:text-white">
    <a class="sr-skip-link" href="#main">Skip to content</a>

    {# Site header #}
    {% include "partials/header.njk" %}

    {# Main content #}
    <main id="main" tabindex="-1" class="flex flex-grow flex-shrink-0 w-full py-8 mx-auto prose prose-md lg:prose-lg">
      {% block content %}
      {{ content | safe }}
      {% endblock %}
    </main>

    {% include "partials/footer.njk" %}

    <script src="./assets/scripts/colorToggle.js" defer></script>
    {% block scripts_body %}
    {# <script src="/assets/scripts/main.js" defer></script> #}
    {% endblock %}

  </body>
</html>